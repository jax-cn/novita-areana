# Novita Arena - 页面规范

**版本**: 1.1
**最后更新**: 2025-01-09
**产品名称**: Novita Arena

---

> **重要提示** 📌
>
> 本文档中的所有页面布局、UI 示意图和交互设计均为**功能示意图**，而非最终设计稿。
>
> 设计团队应基于功能需求，运用专业设计思维重新构思界面，优先考虑视觉美感和用户体验。
>
> 详细说明请参阅本文档末尾的 [PRD 与设计的关系](#prd-与设计的关系) 章节。

---

## 目录

1. [页面规范总则](#1-页面规范总则)
2. [首页（社区画廊）](#2-首页社区画廊)
3. [生成页（PK 竞技场）](#3-生成页pk-竞技场)
4. [响应式设计](#4-响应式设计)
5. [页面交互规范](#5-页面交互规范)
6. [性能与优化](#6-性能与优化)

---

## 1. 页面规范总则

### 1.1 设计理念

双页面架构 - 首页（发现灵感）+ 生成页（PK竞技）

所有核心功能集中在生成页，通过状态切换实现录制与分享，避免页面跳转打断心流。

### 1.2 页面列表

| 路由 | 页面 | 目标 |
|------|------|------|
| `/` | 首页（社区画廊） | 展示精选案例，激发创作灵感 |
| `/playground` | 生成页（PK 竞技场） | 核心生成与对比环境 |

---

## 2. 首页（社区画廊）

**路由**: `/`
**目的**: 展示最惊艳的 AI PK 案例以激发用户创作灵感

### 2.1 布局结构

```
┌─────────────────────────────────────────────────────┐
│  [Novita Arena]    首页                    [👤]      │  ← 顶部导航栏
├─────────────────────────────────────────────────────┤
│                                                      │
│           Generate Anything, Battle the Magic        │  ← Hero 标题
│                                                      │
│   ┌─────────────────────────────────────────────┐   │
│   │  💡 选择一个灵感...        [🎨 效果库 ▼]    │   │  ← 智能输入框
│   │  或直接描述你想要的应用                     │   │
│   └─────────────────────────────────────────────┘   │
│                          [🚀 开始 PK →]             │  ← 生成按钮
│                                                      │
├─────────────────────────────────────────────────────┤
│  [🔥热门] [🆕最新]                                 │  ← 分类标签
├─────────────────────────────────────────────────────┤
│                                                      │
│   ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐          │
│   │ 卡片1 │  │ 卡片2 │  │ 卡片3 │  │ 卡片4 │          │  ← 瀑布流网格
│   └──────┘  └──────┘  └──────┘  └──────┘          │    (24px 间距)
│   ┌──────┐  ┌──────┐  ┌──────┐  └──────┘          │
│   │ 卡片5 │  │ 卡片6 │  │ 卡片7 │  │ 卡片8 │          │
│   └──────┘  └──────┘  └──────┘  └──────┘          │
│                                                      │
└─────────────────────────────────────────────────────┘
```

**布局说明**:
- **顶部导航栏**: Logo、首页标题、用户头像
- **Hero 区**: 大标题 + 智能输入框 + 开始按钮
- **分类标签**: 热门、最新（无搜索功能）
- **瀑布流网格**: 展示官方精选的 PK 案例

### 2.2 智能输入框（Hero CTA）

**核心设计理念**: 降低创作门槛，让用户无需从零开始思考。用户是非技术向的，不需要了解技术细节。

**交互行为**:

1. **点击输入框** → 展开灵感库（下拉菜单/侧边栏）
   - 显示精选灵感卡片（示例见下方）
   - 每个灵感卡片包含：标题、简短描述、难度等级

2. **点击"效果库"下拉菜单** → 两级效果选择
   - **一级分类**: 效果大类（3D效果、物理效果、游戏、数据可视化、动画效果）
   - **二级分类**: 具体效果类型（粒子系统、重力模拟、休闲游戏等）

3. **组合使用**:
   - 选择灵感（如"时钟"）
   - 选择效果（如"3D效果 > 粒子系统"）
   - 自动组合成完整提示词

4. **直接输入**:
   - 用户也可以忽略提示，直接输入自己的创意

**灵感库示例**（轮播展示）:

```
┌─────────────────────────────────────────────────────┐
│  💡 灵感库                                           │
├─────────────────────────────────────────────────────┤
│  🕐 时钟           创建一个 3D 粒子时钟           │
│  🎮 游戏           制作一个扫雷游戏                 │
│  📊 数据可视化    创建销售数据仪表盘               │
│  🎨 艺术生成器    生成抽象几何艺术                 │
│  ⚙️ 工具          创建单位转换器                   │
│  🎵 音乐播放器    设计可视化音乐播放器             │
└─────────────────────────────────────────────────────┘
```

**效果库分类体系**（两级选择）:

| 一级分类 | 二级分类 | 技术栈 | 系统提示词前缀（后端自动添加） |
|---------|---------|--------|------------------------------|
| **3D效果** | 粒子系统 | Three.js + Canvas-confetti | "创建一个使用 Three.js 的 3D 场景，包含粒子特效..." |
| | 物理引擎 | Three.js + Rapier | "创建一个使用 Three.js 和 Rapier 的 3D 物理场景..." |
| | 几何体 | Three.js | "创建一个使用 Three.js 的 3D 几何体展示..." |
| **物理效果** | 重力模拟 | Matter.js | "创建一个重力模拟效果，包含自由落体..." |
| | 碰撞检测 | Matter.js | "创建一个物理碰撞场景，包含物体碰撞..." |
| | 布料模拟 | Matter.js | "创建一个布料物理模拟..." |
| **游戏** | 休闲游戏 | React + Canvas | "创建一个休闲游戏，包含计分系统..." |
| | 益智游戏 | React + Canvas | "创建一个益智游戏，包含关卡设计..." |
| | 街机游戏 | React + Canvas | "创建一个街机风格游戏..." |
| **数据可视化** | 图表 | Recharts | "创建一个数据可视化应用，使用图表展示..." |
| | 仪表盘 | Recharts | "创建一个数据仪表盘，包含多个数据指标..." |
| | 时间轴 | Recharts | "创建一个时间轴可视化..." |
| **动画效果** | 过渡动画 | Framer Motion | "创建一个包含过渡动画的界面..." |
| | 手势动画 | Framer Motion | "创建一个包含手势交互动画的界面..." |
| | 路径动画 | Framer Motion | "创建一个包含路径动画的界面..." |

**默认配置**（降低用户门槛）:
- 左侧模型：默认选中 "Claude 3.5 Sonnet"
- 右侧模型：默认选中 "GPT-4o"
- 用户可以直接点击"开始 PK"使用默认配置
- 也可点击模型选择器更换模型

### 2.3 PK 应用卡片组件

**卡片尺寸**: 16:9 纵横比
**预览方式**: 静态缩略图（无悬停自动播放）

```
┌─────────────────────────────────────────┐
│                                         │
│   ┌──────────┐    ┌──────────┐         │  ← 分屏预览（16:9）
│   │ Claude  │ VS │  GPT-4   │         │    左侧/右侧模型
│   │          │    │          │         │
│   │ 缩略图1  │    │  缩略图2 │         │
│   └──────────┘    └──────────┘         │
├─────────────────────────────────────────┤
│ 3D 物理沙盒 - @novita      [❤️ 128]   │  ← 标题 + 作者 + 点赞数
├─────────────────────────────────────────┤
│ [📋 复制]  [❤️]                        │  ← 操作按钮
└─────────────────────────────────────────┘
```

**交互行为**:
- **点击卡片**: 跳转到生成页，自动填充该 PK 的提示词和模型选择
- **复制按钮**: 复制提示词到剪贴板，Toast 提示
- **点赞按钮**: 切换心形图标状态，更新点赞数
- **悬停**: 显示双方模型名称的颜色徽章

**设计说明**:
- 移除分享按钮（简化交互）
- 使用静态缩略图代替自动播放视频（减少性能开销）
- 保留核心的复制和点赞功能
- 画廊初始内容为官方精选案例，无需空状态设计

---

## 3. 生成页（PK 竞技场）

**路由**: `/playground`
**目的**: 核心生成与对比环境，所有创作功能一体化

**参考实现**: `/app/playground/page.tsx` 第 89-203 行

### 3.1 整体布局

```
┌──────────────────────────────────────────────────────────────┐
│ [← 返回]    [Claude ▼] VS [GPT-4 ▼]      [🔴录制] [⎋分享] │  ← 顶部控制栏
├──────────────────────────────────────────────────────────────┤
│                                                              │
│   ┌────────────────────┐  ┌────────────────────┐            │
│   │                    │  │                    │            │
│   │   模型 A 预览区     │  │   模型 B 预览区     │            │  ← 分屏预览区
│   │                    ││  │                    │            │    (50/50 分割)
│   │                    │  │                    │            │
│   └────────────────────┘  └────────────────────┘            │
│                                                              │
│   [🔍] [🔄]               [🔍] [🔄]                         │  ← 浮动操作按钮
│                                                              │
├──────────────────────────────────────────────────────────────┤
│ 💡 灵感: 构建一个 3D 粒子时钟                                │  ← 灵感卡片（空状态）
│ ┌─────────────────────────────────────────────────────┐      │
│ │ 创建一个可以模拟重力效果的 3D 物理沙盒...            │      │  ← 多行输入框
│ └─────────────────────────────────────────────────────┘      │
│                                              [🚀 生成 PK →] │  ← 生成按钮
└──────────────────────────────────────────────────────────────┘
```

**布局说明**:
- **顶部控制栏**: 导航、模型选择、录制/分享按钮
- **分屏预览区**: 左右 50/50 分屏，可拖动分隔线调整
- **底部输入控制台**: 浮动在底部中央，输入提示词
- **移除技术栈提示**: 用户是非技术向的，不需要显示技术细节

### 3.2 顶部控制栏

**左侧**:
- **返回按钮**: 返回首页 `/`
- **模型选择器**: 两个下拉菜单，中间夹 "VS" 图标
  - 左侧模型选择: 占位 "Claude"
  - 右侧模型选择: 占位 "GPT-4"
  - 点击展开模型列表（支持搜索）
  - 按模型颜色编码徽章

**右侧**:
- **录制按钮**: 红色圆圈图标 (默认禁用，生成完成后启用)
- **分享按钮**: 上传/导出图标 (默认禁用，录制完成后启用)

### 3.3 分屏预览区

**默认状态**:
```
┌─────────────────────────────────────────┐
│                                         │
│         输入提示词开始 PK 生成           │  ← 空状态提示
│                                         │
│    💡 提示: 尝试描述你想要的交互效果      │
│                                         │
└─────────────────────────────────────────┘
```

**生成中状态**:
```
┌────────────────────┬────────────────────┐
│ ⏳ Claude          │ ⏳ GPT-4          │
│ 正在生成代码...    │ 正在生成代码...    │
│ ████████░░ 80%    │ ██████░░░░ 60%    │
└────────────────────┴────────────────────┘
```
- 实时流式显示生成进度条

**预览状态**:
```
┌────────────────────┬────────────────────┐
│                    │                    │
│   iframe 预览 A    │   iframe 预览 B    │
│                    │                    │
│  [全屏] [刷新]     │  [全屏] [刷新]     │
│                    │                    │
└────────────────────┴────────────────────┘
```
- 可拖动中间分隔线调整比例（50/50 → 60/40 → 40/60）
- 每侧独立的全屏和刷新按钮
- 支持与两侧应用独立交互

### 3.4 底部输入控制台

**核心设计理念**: 四种状态管理，生成后不遮挡视线，录制时作为附加信息显示。

**通用规格**:
- **位置**: 浮动在屏幕底部中央
- **宽度**: 屏幕宽度的 60%，最大 800px
- **最小高度**: 56px（单行）
- **最大高度**: 200px（多行自动扩展）

---

**状态 1: 输入时**（未生成/重新编辑）

```
┌──────────────────────────────────────────────────────────────┐
│ 💡 灵感: 构建一个 3D 粒子时钟                                │  ← 灵感卡片（轮播）
│ ┌─────────────────────────────────────────────────────┐      │
│ │ 创建一个可以模拟重力效果的 3D 物理沙盒...            │      │  ← 多行输入框（可编辑）
│ └─────────────────────────────────────────────────────┘      │
│                                              [🚀 生成 PK →] │  ← 生成按钮
└──────────────────────────────────────────────────────────────┘
```

- **灵感卡片**: 轮播显示示例提示词
- **输入框**: 自动扩展的多行文本框，支持快捷键 `Ctrl/Cmd + Enter` 提交
- **生成按钮**: 右侧固定位置，点击开始生成

---

**状态 2: 生成中**

```
┌──────────────────────────────────────────────────────────────┐
│ ⏳ 正在生成...                      [⏹ 停止生成]              │  ← 只读状态
└──────────────────────────────────────────────────────────────┘
```

- **折叠状态**: 收起为简洁的只读条
- **进度提示**: 显示 "正在生成..." 文字
- **停止按钮**: 点击可取消当前生成任务

---

**状态 3: 生成后 & 未录制**

```
┌──────────────────────────────────────────────────────────────┐
│ ✓ 生成完成！点击 [🔴 录制] 捕捉精彩瞬间                      │  ← 提示条（可折叠）
└──────────────────────────────────────────────────────────────┘
```

- **折叠状态**: 收起为简洁的提示条
- **位置**: 移至顶部导航栏下方，作为附加信息
- **提示文字**: 引导用户开始录制
- **可点击**: 点击可展开查看完整提示词或重新编辑

---

**状态 4: 生成后 & 录制中**（重要）

```
┌──────────────────────────────────────────────────────────────┐
│ 🔴 00:05  [⏸ 暂停]  [✓ 完成]  [✕ 取消]                      │  ← 录制时顶部导航栏
├──────────────────────────────────────────────────────────────┤
│ 💡 创建一个 3D 时钟，包含粒子特效和重力模拟                  │  ← 只读提示词条
├──────────────────────────────────────────────────────────────┤
│                                                              │
│                       预览区                                 │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

- **只读提示词条**: 显示在顶部导航栏下方
  - 显示简短的提示词摘要（最多 50 字）
  - 作为录制时的附加信息展示
  - 样式简洁，不抢占视觉焦点
- **完全收起底部输入框**: 避免遮挡预览区

---

**状态转换逻辑**:

```
输入时 (状态1)
  ↓ 点击生成
生成中 (状态2)
  ↓ 生成完成
生成后 & 未录制 (状态3)
  ↓ 点击录制
生成后 & 录制中 (状态4)
  ↓ 停止录制 / 完成
生成后 & 未录制 (状态3) 或 分享弹窗
```

### 3.5 录制模式

**参考实现**: `/app/recording/page.tsx` 第 76-116 行

**核心设计变更**: 所有录制 UI 放在顶部导航栏，无浮动元素。

**触发**: 点击顶部控制栏的录制按钮（仅生成完成后可用）

**录制时顶部导航栏**（极简设计）:

```
┌──────────────────────────────────────────────────────────────┐
│ 🔴 00:05  [⏸ 暂停]  [✓ 完成]  [✕ 取消]                      │
└──────────────────────────────────────────────────────────────┘
```

**导航栏元素说明**:
- **隐藏返回按钮**: 录制中隐藏或禁用，避免误操作
- **录制指示器**: 红点 + 计时器在顶部左侧
  - 格式: MM:SS（例如 "00:05"）
  - 实时更新，精确到秒
- **控制按钮**: 暂停、完成、取消在顶部右侧

**只读提示词条**（录制时显示在导航栏下方）:

```
├──────────────────────────────────────────────────────────────┤
│ 💡 创建一个 3D 时钟，包含粒子特效和重力模拟                  │  ← 只读提示词
├──────────────────────────────────────────────────────────────┤
```

- 显示简短的提示词摘要（最多 50 字）
- 作为录制时的附加信息展示
- 样式简洁，不抢占视觉焦点
- 用户可点击展开查看完整提示词或重新编辑

**无遮罩效果**:
- 移除半透明黑色遮罩
- 移除红色虚线动画边框
- 录制区域干净，便于后期裁剪

**录制范围**:
- 录制整个标签页（包括预览区和只读提示词）
- 所有非预览 UI 都在顶部导航栏，方便后期裁剪
- 通过 MediaRecorder API 捕获
- 导出为 16:9 MP4 视频，帧率 30fps

### 3.6 分享弹窗

**触发**: 录制完成或点击分享按钮

**核心功能**: 自动使用 LLM 根据提示词生成应用名称。

**布局**:
```
┌───────────────────────────────────────────────────┐
│  分享你的 PK 创作                          [×]    │  ← 标题栏
├───────────────────────────────────────────────────┤
│                                                   │
│   ┌─────────────────────────────────────┐        │
│   │                                     │        │
│   │      16:9 视频播放器                 │        │  ← 视频预览
│   │      循环播放录制的片段              │        │
│   │                                     │        │
│   └─────────────────────────────────────┘        │
│                                                   │
│   应用名称: [3D 时钟 - 粒子特效版]    ✨ AI生成   │  ← 命名输入框
│   提示词: 创建一个 3D 时钟，包含粒子特效...        │  ← 原始提示词（只读）
│                                                   │
│   分享到:                                         │
│   [𝕏 Twitter]  [LinkedIn]  [TikTok]  [📋 复制链接]│  ← 社交分享
│                                                   │
│                          [⬇️ 下载 MP4]  [发布到画廊]│  ← 导出选项
└───────────────────────────────────────────────────┘
```

**左侧（视频预览）**:
- 16:9 视频播放器
- 循环播放录制的 PK 片段
- 支持播放/暂停/时间轴控制

**右侧（配置）**:
- **应用命名**:
  - 后端自动调用 LLM 生成名称
  - Prompt 模板: "根据以下提示词生成一个简洁的应用名称（不超过 15 字）：{user_prompt}"
  - 预填充生成的名称，用户可编辑
  - 显示 "✨ AI生成" 标识
  - 示例: "3D 时钟 - 粒子特效版"、"物理沙盒 - 重力模拟"

- **原始提示词**: 只读展示，方便用户回顾

- **社交分享**: 大图标按钮（𝕏, LinkedIn, TikTok）
  - 点击后打开对应平台的分享链接
  - 附带预描述文字: "来看看我用 {ModelA} vs {ModelB} 生成的 {App_name}！#NovitaArena"

- **复制链接**: 复制应用访问链接到剪贴板

- **下载 MP4**: 下载录制的视频到本地

- **发布到画廊**: 勾选后分享到社区画廊（默认不勾选）

**LLM 自动命名流程**:

```
1. 用户点击录制完成
   ↓
2. 前端发送请求到后端 API (POST /api/generate-name)
   ↓
3. 后端调用 Novita LLM 服务生成应用名称
   ↓
4. 返回生成的名称
   ↓
5. 前端预填充到分享弹窗的输入框
   ↓
6. 用户可编辑或直接使用
```

---

## 4. 响应式设计

### 4.1 桌面端 (> 1024px)

- **分屏预览**: 左右并排 (50/50)，支持拖动调整
- **输入控制台**: 屏幕宽度的 60%
- **导航栏**: 水平布局

### 4.2 平板端 (768px - 1024px)

- **分屏预览**: 保持左右并排，最小宽度 300px
- **输入控制台**: 屏幕宽度的 80%
- **卡片网格**: 2 列瀑布流

### 4.3 移动端 (< 768px)

- **分屏预览**: Tab 切换模式（非左右并排）
  - 默认显示模型 A
  - 顶部 Tab: [Claude | GPT-4] 切换
- **输入控制台**: 全宽 (100%)
- **卡片网格**: 单列布局
- **录制 HUD**: 按钮堆叠为垂直布局

---

## 5. 页面交互规范

### 5.1 导航流程

```
首页 (/)
  ↓ 点击 "开始创作"
生成页 (/playground)
  ↓ 生成 + 录制 + 分享
  ↓ 点击 "发布到画廊"
首页 (/) - 新作品出现在瀑布流中
```

### 5.2 状态机管理

生成页的核心状态:
- `idle`: 空闲，等待输入
- `generating`: 正在生成
- `completed`: 生成完成，可交互
- `recording`: 录制中
- `sharing`: 分享弹窗打开

### 5.3 快捷键

- `Ctrl/Cmd + Enter`: 生成 PK
- `Esc`: 取消录制 / 关闭弹窗
- `R`: 开始录制（生成完成状态下）
- `S`: 打开分享弹窗（录制完成后）

---

## 6. 性能与优化

### 6.1 首页优化

- **瀑布流**: 使用虚拟滚动 (react-window) 处理大量卡片
- **视频预览**: 懒加载，仅在卡片进入视口时加载
- **图片优化**: WebP 格式，响应式尺寸

### 6.2 生成页优化

- **iframe 隔离**: 每个 iframe 独立进程，避免崩溃
- **流式生成**: Server-Sent Events (SSE) 实时推送生成进度
- **代码缓存**: 相同提示词缓存生成结果，避免重复调用 LLM
- **录制优化**: 仅录制 Canvas 变化，减小视频文件体积

---

## PRD 与设计的关系

> **重要说明**: 本 PRD 中的所有页面布局、UI 示意图和交互设计均为**功能示意图**，而非最终设计稿。

### PRD 的定位

- **功能需求文档**: 明确产品功能、交互流程和信息架构
- **设计参考**: 为设计团队提供功能框架和业务逻辑
- **沟通基础**: 产品、设计、研发三方的协作基准

### 设计的专业性

- **从设计思维出发**: 设计团队应基于 PRD 的功能需求，运用专业设计思维重新构思界面
- **考虑实际美感**: 优先考虑视觉美感、用户体验和情感化设计
- **不局限于 PRD**: 设计不应受限于 PRD 中的 ASCII 图示或布局描述
- **创造性解决方案**: 设计师可以提出更好的交互方案和视觉表达

### 协作流程

1. **PRD 提供功能框架**: 明确"需要什么功能"和"如何工作"
2. **设计团队创造性转化**: 将功能需求转化为美观、易用的界面
3. **双向沟通**: 设计过程中如有功能调整，与产品团队沟通确认
4. **设计交付**: 最终设计稿将作为开发实现的依据

### 示例说明

```
PRD 中描述: "智能输入框包含灵感选择和效果库下拉菜单"
设计实现: 可以是卡片式选择器、侧边抽屉、模态弹窗等任何形式
         只要功能完整且用户体验更优即可
```

### 核心理念

> **PRD 定义"做什么"，设计决定"怎么做"和"做成什么样"**

---

## 相关文档

- **产品概览**: 详见 [00-产品概览.md](./00-产品概览.md)
- **技术实现**: 详见 [01-技术规范.md](./01-技术规范.md)
- **运营设计**: 详见 [03-运营与设计.md](./03-运营与设计.md)
